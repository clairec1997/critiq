{%extends "base.html" %}

{% block content %}
<!-- <div id="featured-movie">
    <h3>Featured Movie: #<span id='tt'></span></h3>
    <h4>Title: <span id='title'></span> Directed By: <span id='director'></span> 
        Release: <span id='release'></span></h4>
</div> -->
<div id="results">
        {% if resKind=="Recs" %}
        <h1>Recommendations:</h1>
        {% else %}
        <h1>Search results for {{resKind}}: '{{term}}' </h1> 
        {% endif %}
        <br>
        <table id="res-list" class="table">
            <thead>
            <tr>
	      {% if (resKind=="Works") or (resKind=="Recs") %}
                <th>Title</th>
                <th>Author</th>
                <th># of Chapters</th>
                <!-- <th>Finished? </th> -->
	      {% else %}
		<th>Author Username</th>
	      {% endif %}
            </tr>
        </thead>
        {%for result in res %}
        {% if (resKind=="Works") or (resKind=="Recs") %}
            {% if result and result['sid'] %}   
            <tr work-sid="{{result['sid']}}">
                <td class="title"><a href="{{url_for('read', sid=result.sid)}}">{{result['title']}}</a></td>
                <td class="author"><a href="{{url_for('profile', username=result['username'])}}">{{result['username']}}</a></td>
                <td class="chapter-cnt">{{result['count(sid)']}}</td>
                <!-- <td class="updated">
                    {% if result['wip'] %}
                    Yes
                    {% else %}
                    No
                    {% endif %}
                </td> -->
            </tr> 
            {% else %}
            <tr><td>No results found</td></tr>
            {% endif %} 
	    {% else %}
	        <tr uid="{{result['uid']}}">
	            <td class="uname"><a href="{{ url_for('profile', username=result['username']) }}">{{result['username']}}</a></td>
	        </tr>
        {% endif %}
        
        {%endfor%}
	    

        </table>

</div>
<br><br>

{% if warnings %}
<div id="filters" class="story">
    <h4>Don't show me works involving:</h4>
    <form id="filter-frm" method="POST" action="{{request.url}}">
        {% for warning in warnings %}
        <br>
        <input type="checkbox" name="warnings[]" value="{{warning['tid']}}"> {{warning['tname']}}</input>
        {% endfor %}
        <br><br>
        <input type="submit" name="submit-btn" value="Exclude" class="btn btn-secondary">
    </form>
</div>
{% endif %}

{%endblock%}
